<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <link rel="icon" sizes="128x128" href="favicon.ico">   
    <title>Teziutlán | La Perla de la Sierra</title>
    
    <!-- Framework & Fonts -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Cormorant+Garamond:ital,wght@0,300;0,600;1,400&family=Montserrat:wght@200;400&display=swap" rel="stylesheet">
    
    <style>
        /* CONFIGURACIÓN DE VARIABLES COSMÉTICAS */
        :root {
            --cantera-rose: #d4a373;
            --stone-gray: #4a4e69;
            --deep-blue: #002855;
            --iron-black: #1a1a1a;
            --teja-red: #a54228;
            --cream: #f4f1de;
        }

        body {
            background-color: var(--cream);
            color: var(--iron-black);
            font-family: 'Cormorant Garamond', serif;
            overflow-x: hidden;
        }

        /* 1. CARGADOR (LOADER) - PUERTAS DE PALACIO */
        #loader {
            position: fixed;
            inset: 0;
            z-index: 9999;
            pointer-events: none;
            overflow: hidden;
            display: flex;
        }

        .loader-panel {
            position: absolute;
            top: 0;
            width: 51%; /* Traslape para evitar líneas blancas en el centro */
            height: 100vh;
            background: var(--deep-blue);
            transition: transform 1.2s cubic-bezier(0.77, 0, 0.175, 1);
        }

        .panel-left { left: 0; }
        .panel-right { right: 0; }

        .loader-logo {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: var(--cantera-rose);
            font-family: 'Cinzel', serif;
            font-size: clamp(1.5rem, 5vw, 2.5rem);
            letter-spacing: 0.5em;
            z-index: 10000;
            transition: opacity 0.6s ease;
            text-align: center;
            width: 90%;
        }

        /* Animación de Apertura */
        .loaded #loader .panel-left { transform: translateX(-100%); }
        .loaded #loader .panel-right { transform: translateX(100%); }
        .loaded .loader-logo { opacity: 0; pointer-events: none; }

        /* 2. FILTROS DE IMÁGENES HISTÓRICAS */
        .historic-img-container {
            overflow: hidden;
            position: relative;
            background: var(--iron-black);
            aspect-ratio: 16/10;
        }

        .historic-img-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: sepia(0.6) contrast(1.2) brightness(0.8);
            transition: all 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            transform: scale(1.05);
        }

        .historic-img-container:hover img {
            filter: sepia(0) contrast(1) brightness(1);
            transform: scale(1);
        }

        .historic-img-container::after {
            content: "";
            position: absolute;
            inset: 0;
            background-image: url('https://www.transparenttextures.com/patterns/p6-mini.png');
            opacity: 0.15;
            pointer-events: none;
            mix-blend-mode: multiply;
        }

        /* 3. SISTEMA DE REVELACIÓN (SCROLL REVEAL) */
        .reveal {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 1.2s ease, transform 1.2s ease;
        }

        .reveal.animate-in {
            opacity: 1;
            transform: translateY(0);
        }

        /* 4. ESTILOS GENERALES */
        .serif-title { font-family: 'Cinzel', serif; font-weight: 700; }
        .accent-text { color: var(--teja-red); font-family: 'Cinzel', serif; }

        .parallax-bg-text {
            font-size: 15vw;
            color: rgba(0, 40, 85, 0.03);
            position: absolute;
            font-family: 'Cinzel', serif;
            pointer-events: none;
            z-index: -1;
            white-space: nowrap;
            top: 20%;
        }

        /* Botones Personalizados */
        .btn-colonial {
            padding: 1rem 2.5rem;
            border: 1px solid var(--iron-black);
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.2em;
            font-weight: 700;
            transition: all 0.4s ease;
            position: relative;
            background: transparent;
        }

        .btn-colonial:hover {
            background: var(--iron-black);
            color: white;
            padding-left: 3rem;
            padding-right: 2rem;
        }

        /* Scrollbar */
        ::-webkit-scrollbar { width: 5px; }
        ::-webkit-scrollbar-thumb { background: var(--cantera-rose); }
    </style>
</head>
<body class="antialiased">

    <!-- CARGADOR -->
    <div id="loader">
        <div class="loader-logo">TEZIUTLÁN</div>
        <div class="loader-panel panel-left"></div>
        <div class="loader-panel panel-right"></div>
    </div>

    <!-- NAVEGACIÓN RESPONSIVA -->
    <nav class="fixed w-full z-50 px-6 md:px-12 py-6 flex justify-between items-center mix-blend-difference text-white">
        <div class="serif-title text-lg md:text-xl tracking-[0.4em]">CDLXXIII</div>
        <!-- Menú Escritorio -->
        <div class="hidden lg:flex gap-10 text-[10px] uppercase tracking-[0.3em] font-bold">
            <a href="#historia" class="hover:text-amber-400 transition">Historia</a>
            <a href="#curiosidades" class="hover:text-amber-400 transition">Hechos</a>
            <a href="#naturaleza" class="hover:text-amber-400 transition">Lugares</a>
            <a href="#arquitectura" class="hover:text-amber-400 transition">Portal</a>
        </div>
        <!-- Indicador Móvil -->
        <div class="lg:hidden text-[10px] uppercase tracking-widest border border-white/30 px-3 py-1">Menú</div>
    </nav>

    <!-- SECCIÓN HERO (PORTADA) -->
    <section class="relative h-screen flex items-center justify-center overflow-hidden bg-zinc-900">
        <!-- Imagen de Fondo con Zoom suave -->
        <div id="hero-bg" class="absolute inset-0 z-0 bg-cover bg-center transition-transform duration-[10s] ease-out scale-110" 
             style="background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.6)), url('https://www.mexicodesconocido.com.mx/wp-content/uploads/2025/07/catedral-de-teziutlan-facebook.jpg');">
        </div>
        
        <div class="inner-border absolute inset-6 md:inset-12 border border-amber-200/30 z-10 pointer-events-none"></div>
        
        <div class="relative z-20 text-center text-white px-4 max-w-5xl">
            <h2 class="serif-title text-[10px] md:text-xs tracking-[0.6em] mb-6 opacity-80 uppercase reveal">La Perla de la Sierra</h2>
            <h1 class="serif-title text-4xl md:text-7xl lg:text-8xl mb-8 leading-tight reveal">Tierra de <br class="hidden md:block"> Niebla y Piedra</h1>
            <p class="text-base md:text-xl lg:text-2xl font-light italic opacity-90 reveal max-w-2xl mx-auto mb-10">
                Donde la cantera rosa narra historias de siglos bajo el susurro de la montaña.
            </p>
            <a href="#historia" class="reveal inline-block border border-white px-8 py-3 text-[10px] tracking-widest uppercase hover:bg-white hover:text-black transition-colors">Empezar viaje</a>
        </div>
    </section>

    <!-- CONTENIDO PRINCIPAL -->
    <main class="relative bg-white pt-24 md:pt-40">
        <div class="parallax-bg-text" id="pText">HISTORIA</div>

        <!-- 1. SECCIÓN HISTORIA -->
        <section id="historia" class="max-w-7xl mx-auto px-6 md:px-12 mb-32 md:mb-56">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 md:gap-24 items-center">
                <div class="reveal">
                    <span class="accent-text text-[10px] tracking-[0.3em] uppercase block mb-4">Crónicas de la Perla</span>
                    <h2 class="text-4xl md:text-6xl serif-title mb-8 text-stone-900 leading-tight">Nobleza Tallada <br>en Roca Rosa</h2>
                    <p class="text-lg md:text-xl text-stone-600 leading-relaxed font-light mb-8">
                        Teziutlán ganó su apodo por la pulcritud de sus calles y la riqueza de sus familias, quienes compitieron por construir las fachadas más bellas de la Sierra Madre Oriental.
                    </p>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-6 mb-12">
                        <div class="border-l-2 border-amber-600 pl-4">
                            <h4 class="serif-title text-sm mb-2">Fundación</h4>
                            <p class="text-stone-500 text-sm italic">15 de Marzo, 1552</p>
                        </div>
                        <div class="border-l-2 border-amber-600 pl-4">
                            <h4 class="serif-title text-sm mb-2">Etimología</h4>
                            <p class="text-stone-500 text-sm italic">Lugar junto al cerro de granizo</p>
                        </div>
                    </div>
                    <button class="btn-colonial">Explorar Archivos</button>
                </div>
                <div class="relative reveal">
                    <div class="historic-img-container shadow-2xl">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/6/6a/Placa_de_la_fundaci%C3%B3n_de_Teziutl%C3%A1n.jpg/500px-Placa_de_la_fundaci%C3%B3n_de_Teziutl%C3%A1n.jpg" alt="Palacio Municipal">
                    </div>
                    <div class="absolute -bottom-4 -left-4 bg-white p-4 shadow-lg hidden sm:block">
                        <p class="serif-title text-[9px] tracking-widest text-stone-400">Placa ubicada en los bajos del palacio municipal.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- 2. SECCIÓN CURIOSIDADES (DARK MODE) -->
        <section id="curiosidades" class="bg-zinc-950 py-24 md:py-40 overflow-hidden text-white">
            <div class="max-w-7xl mx-auto px-6 md:px-12">
                <div class="max-w-3xl mb-24 reveal">
                    <h2 class="serif-title text-4xl md:text-6xl mb-6">Hechos Extraordinarios</h2>
                    <div class="w-20 h-1 bg-amber-600 mb-8"></div>
                    <p class="text-zinc-400 text-lg md:text-xl font-light">Pequeños relatos que hacen de este municipio un lugar único en el mundo.</p>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-12 lg:gap-20">
                    <div class="reveal" style="transition-delay: 0.1s;">
                        <span class="text-amber-500 serif-title text-3xl mb-6 block">01.</span>
                        <h3 class="serif-title text-xl mb-4 tracking-wide">Plaza Techada</h3>
                        <p class="text-zinc-500 font-light leading-relaxed">"El Pinal" ostenta el orgullo de ser la primera plaza de toros techada del mundo, una proeza técnica para vencer a la lluvia serrana.</p>
                    </div>
                    <div class="reveal" style="transition-delay: 0.2s;">
                        <span class="text-amber-500 serif-title text-3xl mb-6 block">02.</span>
                        <h3 class="serif-title text-xl mb-4 tracking-wide">Cuna de Poder</h3>
                        <p class="text-zinc-500 font-light leading-relaxed">Pocos municipios pueden presumir ser la cuna de una dinastía política que definió el México moderno: los Ávila Camacho.</p>
                    </div>
                    <div class="reveal" style="transition-delay: 0.3s;">
                        <span class="text-amber-500 serif-title text-3xl mb-6 block">03.</span>
                        <h3 class="serif-title text-xl mb-4 tracking-wide">La Estación</h3>
                        <p class="text-zinc-500 font-light leading-relaxed">El ferrocarril no solo trajo progreso, trajo la influencia europea que hoy vemos en los balcones y portales del centro.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- 3. SECCIÓN NATURALEZA -->
        <section id="naturaleza" class="py-24 md:py-48 px-6 overflow-hidden">
            <div class="max-w-7xl mx-auto">
                <div class="flex flex-col lg:flex-row items-center gap-16 md:gap-32">
                    <div class="w-full lg:w-1/2 reveal">
                        <div class="historic-img-container shadow-2xl rounded-sm">
                            <img src="https://blob.tusbuenasnoticias.com/images/2025/01/26/recorre-bosques-y-cascadas-de-teziutlan-focus-0-0-825-610.webp" alt="Niebla Teziuteca">
                        </div>
                    </div>
                    <div class="w-full lg:w-1/2 reveal">
                        <span class="accent-text text-[10px] tracking-[0.4em] uppercase mb-4 block">Misticismo Natural</span>
                        <h2 class="text-4xl md:text-6xl serif-title mb-8 text-stone-900 leading-tight">El Bosque que <br>Respira Agua</h2>
                        <p class="text-lg md:text-xl text-stone-600 leading-relaxed font-light mb-8">
                            Nuestra niebla es vida. En los alrededores de la ciudad se conserva el bosque mesófilo de montaña, un ecosistema que parece sacado de un cuento antiguo, donde el musgo y los helechos guardan secretos milenarios.
                        </p>
                        <blockquote class="border-l-4 border-amber-600 pl-8 py-4 mb-8">
                            <p class="text-stone-800 italic text-xl italic font-serif">"En Teziutlán, la niebla no es clima, es el alma de la ciudad caminando por sus calles."</p>
                        </blockquote>
                    </div>
                </div>
            </div>
        </section>

        <!-- 4. GALERÍA / ARQUITECTURA -->
        <section id="arquitectura" class="py-24 md:py-40 bg-stone-100">
            <div class="max-w-7xl mx-auto px-6">
                <div class="text-center mb-24 reveal">
                    <h2 class="serif-title text-4xl md:text-6xl mb-4">Catálogo Colonial</h2>
                    <p class="text-stone-500 uppercase tracking-widest text-[10px]">Patrimonio de la Perla</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 md:gap-12">
                    <!-- Item 1 -->
                    <div class="reveal">
                        <div class="historic-img-container mb-6 shadow-xl">
                            <img src="https://blob.tusbuenasnoticias.com/images/2025/05/30/teatro-victoria-0902b933-focus-0-0-825-568.webp" alt="Teatro Victoria">
                        </div>
                        <h3 class="serif-title text-xl mb-3">Teatro Victoria</h3>
                        <p class="text-stone-500 text-sm font-light">Inaugurado en 1881, es el centro de las artes más importante de la Sierra.</p>
                    </div>
                    <!-- Item 2 -->
                    <div class="reveal" style="transition-delay: 0.1s;">
                        <div class="historic-img-container mb-6 shadow-xl">
                            <img src="https://i.pinimg.com/originals/71/96/0b/71960b72598ad9dfde98ee9d3ee1d786.jpg" alt="Catedral Asuncion">
                        </div>
                        <h3 class="serif-title text-xl mb-3">Catedral</h3>
                        <p class="text-stone-500 text-sm font-light">Majestuosa edificación de cantera rosa con un altar que deslumbra al peregrino.</p>
                    </div>
                    <!-- Item 3 -->
                    <div class="reveal" style="transition-delay: 0.2s;">
                        <div class="historic-img-container mb-6 shadow-xl">
                            <img src="https://escapadas.mexicodesconocido.com.mx/wp-content/uploads/2023/08/@turisteandomexi_1920.jpg" alt="El carmen">
                        </div>
                        <h3 class="serif-title text-xl mb-3">Iglesia del Carmen</h3>
                        <p class="text-stone-500 text-sm font-light">Conoce una de las joyas arquitectónicas del siglo XVIII.</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- FOOTER -->
    <footer class="bg-stone-50 border-t border-stone-200 py-24 text-center px-6">
        <div class="serif-title text-2xl md:text-4xl mb-4 tracking-tighter">TEZIUTLÁN</div>
        <p class="text-stone-400 text-sm md:text-lg font-light mb-12 italic max-w-lg mx-auto">
            Un tributo digital a la elegancia serrana y al legado de quienes tallaron nuestra historia en piedra.
        </p>
        <div class="flex justify-center gap-8 mb-12 text-stone-400 text-[10px] font-bold uppercase tracking-widest">
            <a href="#" class="hover:text-amber-700 transition">Instagram</a>
            <a href="#" class="hover:text-amber-700 transition">Archivo</a>
            <a href="#" class="hover:text-amber-700 transition">Contacto</a>
        </div>
        <div class="text-[9px] uppercase tracking-[0.6em] text-black-300">
            © CDLXXIII Portal Oficial de Teziutlán: La Perla de la Sierra
        </div>
    </footer>

    <!-- LÓGICA DE INTERACCIÓN -->
    <script>
        // CONTROL DE CARGA Y ENTRADA
        window.addEventListener('load', () => {
            const loader = document.getElementById('loader');
            const heroBg = document.getElementById('hero-bg');
            
            setTimeout(() => {
                document.body.classList.add('loaded');
                heroBg.classList.remove('scale-110'); // Inicia zoom out del hero
                
                // Activar animaciones del Hero secuencialmente
                document.querySelectorAll('.hero-frame .reveal').forEach((el, i) => {
                    setTimeout(() => el.classList.add('animate-in'), 400 + (i * 150));
                });
            }, 800);

            // Eliminar loader del DOM para optimizar
            loader.addEventListener('transitionend', (e) => {
                if(e.propertyName === 'transform') {
                    loader.style.display = 'none';
                }
            });
        });

        // PARALLAX EFECTO EN TEXTO DE FONDO
        window.addEventListener('scroll', () => {
            const pText = document.getElementById('pText');
            let scroll = window.pageYOffset;
            if (pText) {
                pText.style.transform = `translateX(${scroll * 0.12}px)`;
            }
        });

        // OBSERVADOR DE REVELACIÓN (SCROLL REVEAL)
        const revealObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('animate-in');
                }
            });
        }, { 
            threshold: 0.15,
            rootMargin: '0px 0px -50px 0px' 
        });

        document.querySelectorAll('.reveal').forEach(el => revealObserver.observe(el));

        // NAVEGACIÓN SUAVE (SMOOTH SCROLL)
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });
    </script>
</body>
</html>            font-size: clamp(1.5rem, 5vw, 2.5rem);
            letter-spacing: 0.5em;
            z-index: 10000;
            transition: opacity 0.6s ease;
            text-align: center;
            width: 90%;
        }

        /* Animación de Apertura */
        .loaded #loader .panel-left { transform: translateX(-100%); }
        .loaded #loader .panel-right { transform: translateX(100%); }
        .loaded .loader-logo { opacity: 0; pointer-events: none; }

        /* 2. FILTROS DE IMÁGENES HISTÓRICAS */
        .historic-img-container {
            overflow: hidden;
            position: relative;
            background: var(--iron-black);
            aspect-ratio: 16/10;
        }

        .historic-img-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: sepia(0.6) contrast(1.2) brightness(0.8);
            transition: all 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            transform: scale(1.05);
        }

        .historic-img-container:hover img {
            filter: sepia(0) contrast(1) brightness(1);
            transform: scale(1);
        }

        .historic-img-container::after {
            content: "";
            position: absolute;
            inset: 0;
            background-image: url('https://www.transparenttextures.com/patterns/p6-mini.png');
            opacity: 0.15;
            pointer-events: none;
            mix-blend-mode: multiply;
        }

        /* 3. SISTEMA DE REVELACIÓN (SCROLL REVEAL) */
        .reveal {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 1.2s ease, transform 1.2s ease;
        }

        .reveal.animate-in {
            opacity: 1;
            transform: translateY(0);
        }

        /* 4. ESTILOS GENERALES */
        .serif-title { font-family: 'Cinzel', serif; font-weight: 700; }
        .accent-text { color: var(--teja-red); font-family: 'Cinzel', serif; }

        .parallax-bg-text {
            font-size: 15vw;
            color: rgba(0, 40, 85, 0.03);
            position: absolute;
            font-family: 'Cinzel', serif;
            pointer-events: none;
            z-index: -1;
            white-space: nowrap;
            top: 20%;
        }

        /* Botones Personalizados */
        .btn-colonial {
            padding: 1rem 2.5rem;
            border: 1px solid var(--iron-black);
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.2em;
            font-weight: 700;
            transition: all 0.4s ease;
            position: relative;
            background: transparent;
        }

        .btn-colonial:hover {
            background: var(--iron-black);
            color: white;
            padding-left: 3rem;
            padding-right: 2rem;
        }

        /* Scrollbar */
        ::-webkit-scrollbar { width: 5px; }
        ::-webkit-scrollbar-thumb { background: var(--cantera-rose); }

        /* ========== CHAT IA STYLES ========== */
        .chat-toggle-btn {
            position: fixed;
            right: 20px;
            bottom: 20px;
            z-index: 20000;
            background: var(--deep-blue);
            color: white;
            border-radius: 999px;
            padding: 0.6rem 1rem;
            box-shadow: 0 8px 24px rgba(0,0,0,0.25);
            cursor: pointer;
            display: flex;
            gap: 0.6rem;
            align-items: center;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.12em;
            font-size: 12px;
        }

        .chat-panel {
            position: fixed;
            right: 20px;
            bottom: 80px;
            width: min(420px, 92vw);
            max-height: 70vh;
            background: white;
            border-radius: 12px;
            box-shadow: 0 12px 40px rgba(0,0,0,0.3);
            overflow: hidden;
            z-index: 20000;
            display: flex;
            flex-direction: column;
            border: 1px solid rgba(0,0,0,0.06);
        }

        .chat-header {
            background: linear-gradient(90deg, var(--deep-blue), #003f7a);
            color: white;
            padding: 12px 14px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
        }

        .chat-messages {
            padding: 12px;
            overflow-y: auto;
            flex: 1 1 auto;
            background: linear-gradient(180deg, rgba(245,245,247,0.9), rgba(255,255,255,1));
        }

        .msg { margin-bottom: 12px; max-width: 100%; }
        .msg.user { text-align: right; }
        .bubble { display: inline-block; padding: 10px 12px; border-radius: 10px; font-size: 14px; }
        .bubble.user { background: var(--deep-blue); color: white; border-bottom-right-radius: 2px; }
        .bubble.assistant { background: #f3f4f6; color: #111827; border-bottom-left-radius: 2px; }

        .chat-footer { padding: 10px; border-top: 1px solid #eee; display: flex; gap: 8px; align-items: center; }
        .chat-input { flex: 1; padding: 10px 12px; border-radius: 8px; border: 1px solid #ddd; }
        .chat-send { background: var(--cantera-rose); border: none; color: white; padding: 10px 12px; border-radius: 8px; font-weight: 700; cursor: pointer; }

        .chat-notice { font-size: 12px; color: #6b7280; padding: 8px 12px; border-bottom: 1px dashed #eee; }

        .chat-loading { width: 18px; height: 18px; border-radius: 50%; border: 3px solid rgba(255,255,255,0.2); border-top-color: white; animation: spin 1s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }

    </style>
</head>
<body class="antialiased">

    <!-- CARGADOR -->
    <div id="loader">
        <div class="loader-logo">TEZIUTLÁN</div>
        <div class="loader-panel panel-left"></div>
        <div class="loader-panel panel-right"></div>
    </div>

    <!-- NAVEGACIÓN RESPONSIVA -->
    <nav class="fixed w-full z-50 px-6 md:px-12 py-6 flex justify-between items-center mix-blend-difference text-white">
        <div class="serif-title text-lg md:text-xl tracking-[0.4em]">CDLXXIII</div>
        <!-- Menú Escritorio -->
        <div class="hidden lg:flex gap-10 text-[10px] uppercase tracking-[0.3em] font-bold">
            <a href="#historia" class="hover:text-amber-400 transition">Historia</a>
            <a href="#curiosidades" class="hover:text-amber-400 transition">Hechos</a>
            <a href="#naturaleza" class="hover:text-amber-400 transition">Lugares</a>
            <a href="#arquitectura" class="hover:text-amber-400 transition">Portal</a>
        </div>
        <!-- Indicador Móvil -->
        <div class="lg:hidden text-[10px] uppercase tracking-widest border border-white/30 px-3 py-1">Menú</div>
    </nav>

    <!-- SECCIÓN HERO (PORTADA) -->
    <section class="relative h-screen flex items-center justify-center overflow-hidden bg-zinc-900">
        <!-- Imagen de Fondo con Zoom suave -->
        <div id="hero-bg" class="absolute inset-0 z-0 bg-cover bg-center transition-transform duration-[10s] ease-out scale-110" 
             style="background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.6)), url('https://www.mexicodesconocido.com.mx/wp-content/uploads/2025/07/catedral-de-teziutlan-facebook.jpg');">
        </div>
        
        <div class="inner-border absolute inset-6 md:inset-12 border border-amber-200/30 z-10 pointer-events-none"></div>
        
        <div class="relative z-20 text-center text-white px-4 max-w-5xl">
            <h2 class="serif-title text-[10px] md:text-xs tracking-[0.6em] mb-6 opacity-80 uppercase reveal">La Perla de la Sierra</h2>
            <h1 class="serif-title text-4xl md:text-7xl lg:text-8xl mb-8 leading-tight reveal">Tierra de <br class="hidden md:block"> Niebla y Piedra</h1>
            <p class="text-base md:text-xl lg:text-2xl font-light italic opacity-90 reveal max-w-2xl mx-auto mb-10">
                Donde la cantera rosa narra historias de siglos bajo el susurro de la montaña.
            </p>
            <a href="#historia" class="reveal inline-block border border-white px-8 py-3 text-[10px] tracking-widest uppercase hover:bg-white hover:text-black transition-colors">Empezar viaje</a>
        </div>
    </section>

    <!-- CONTENIDO PRINCIPAL -->
    <main class="relative bg-white pt-24 md:pt-40">
        <div class="parallax-bg-text" id="pText">HISTORIA</div>

        <!-- 1. SECCIÓN HISTORIA -->
        <section id="historia" class="max-w-7xl mx-auto px-6 md:px-12 mb-32 md:mb-56">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 md:gap-24 items-center">
                <div class="reveal">
                    <span class="accent-text text-[10px] tracking-[0.3em] uppercase block mb-4">Crónicas de la Perla</span>
                    <h2 class="text-4xl md:text-6xl serif-title mb-8 text-stone-900 leading-tight">Nobleza Tallada <br>en Roca Rosa</h2>
                    <p class="text-lg md:text-xl text-stone-600 leading-relaxed font-light mb-8">
                        Teziutlán ganó su apodo por la pulcritud de sus calles y la riqueza de sus familias, quienes compitieron por construir las fachadas más bellas de la Sierra Madre Oriental.
                    </p>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-6 mb-12">
                        <div class="border-l-2 border-amber-600 pl-4">
                            <h4 class="serif-title text-sm mb-2">Fundación</h4>
                            <p class="text-stone-500 text-sm italic">15 de Marzo, 1552</p>
                        </div>
                        <div class="border-l-2 border-amber-600 pl-4">
                            <h4 class="serif-title text-sm mb-2">Etimología</h4>
                            <p class="text-stone-500 text-sm italic">Lugar junto al cerro de granizo</p>
                        </div>
                    </div>
                    <button class="btn-colonial">Explorar Archivos</button>
                </div>
                <div class="relative reveal">
                    <div class="historic-img-container shadow-2xl">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/6/6a/Placa_de_la_fundaci%C3%B3n_de_Teziutl%C3%A1n.jpg/500px-Placa_de_la_fundaci%C3%B3n_de_Teziutl%C3%A1n.jpg" alt[...]>
                    </div>
                    <div class="absolute -bottom-4 -left-4 bg-white p-4 shadow-lg hidden sm:block">
                        <p class="serif-title text-[9px] tracking-widest text-stone-400">Placa ubicada en los bajos del palacio municipal.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- 2. SECCIÓN CURIOSIDADES (DARK MODE) -->
        <section id="curiosidades" class="bg-zinc-950 py-24 md:py-40 overflow-hidden text-white">
            <div class="max-w-7xl mx-auto px-6 md:px-12">
                <div class="max-w-3xl mb-24 reveal">
                    <h2 class="serif-title text-4xl md:text-6xl mb-6">Hechos Extraordinarios</h2>
                    <div class="w-20 h-1 bg-amber-600 mb-8"></div>
                    <p class="text-zinc-400 text-lg md:text-xl font-light">Pequeños relatos que hacen de este municipio un lugar único en el mundo.</p>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-12 lg:gap-20">
                    <div class="reveal" style="transition-delay: 0.1s;">
                        <span class="text-amber-500 serif-title text-3xl mb-6 block">01.</span>
                        <h3 class="serif-title text-xl mb-4 tracking-wide">Plaza Techada</h3>
                        <p class="text-zinc-500 font-light leading-relaxed">"El Pinal" ostenta el orgullo de ser la primera plaza de toros techada del mundo, una proeza técnica para vencer a la lluvi[...]
                    </div>
                    <div class="reveal" style="transition-delay: 0.2s;">
                        <span class="text-amber-500 serif-title text-3xl mb-6 block">02.</span>
                        <h3 class="serif-title text-xl mb-4 tracking-wide">Cuna de Poder</h3>
                        <p class="text-zinc-500 font-light leading-relaxed">Pocos municipios pueden presumir ser la cuna de una dinastía política que definió el México moderno: los Ávila Camacho.[...]
                    </div>
                    <div class="reveal" style="transition-delay: 0.3s;">
                        <span class="text-amber-500 serif-title text-3xl mb-6 block">03.</span>
                        <h3 class="serif-title text-xl mb-4 tracking-wide">La Estación</h3>
                        <p class="text-zinc-500 font-light leading-relaxed">El ferrocarril no solo trajo progreso, trajo la influencia europea que hoy vemos en los balcones y portales del centro.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- 3. SECCIÓN NATURALEZA -->
        <section id="naturaleza" class="py-24 md:py-48 px-6 overflow-hidden">
            <div class="max-w-7xl mx-auto">
                <div class="flex flex-col lg:flex-row items-center gap-16 md:gap-32">
                    <div class="w-full lg:w-1/2 reveal">
                        <div class="historic-img-container shadow-2xl rounded-sm">
                            <img src="https://blob.tusbuenasnoticias.com/images/2025/01/26/recorre-bosques-y-cascadas-de-teziutlan-focus-0-0-825-610.webp" alt="Niebla Teziuteca">
                        </div>
                    </div>
                    <div class="w-full lg:w-1/2 reveal">
                        <span class="accent-text text-[10px] tracking-[0.4em] uppercase mb-4 block">Misticismo Natural</span>
                        <h2 class="text-4xl md:text-6xl serif-title mb-8 text-stone-900 leading-tight">El Bosque que <br>Respira Agua</h2>
                        <p class="text-lg md:text-xl text-stone-600 leading-relaxed font-light mb-8">
                            Nuestra niebla es vida. En los alrededores de la ciudad se conserva el bosque mesófilo de montaña, un ecosistema que parece sacado de un cuento antiguo, donde el musgo y [...]
                        </p>
                        <blockquote class="border-l-4 border-amber-600 pl-8 py-4 mb-8">
                            <p class="text-stone-800 italic text-xl italic font-serif">"En Teziutlán, la niebla no es clima, es el alma de la ciudad caminando por sus calles."</p>
                        </blockquote>
                    </div>
                </div>
            </div>
        </section>

        <!-- 4. GALERÍA / ARQUITECTURA -->
        <section id="arquitectura" class="py-24 md:py-40 bg-stone-100">
            <div class="max-w-7xl mx-auto px-6">
                <div class="text-center mb-24 reveal">
                    <h2 class="serif-title text-4xl md:text-6xl mb-4">Catálogo Colonial</h2>
                    <p class="text-stone-500 uppercase tracking-widest text-[10px]">Patrimonio de la Perla</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 md:gap-12">
                    <!-- Item 1 -->
                    <div class="reveal">
                        <div class="historic-img-container mb-6 shadow-xl">
                            <img src="https://blob.tusbuenasnoticias.com/images/2025/05/30/teatro-victoria-0902b933-focus-0-0-825-568.webp" alt="Teatro Victoria">
                        </div>
                        <h3 class="serif-title text-xl mb-3">Teatro Victoria</h3>
                        <p class="text-stone-500 text-sm font-light">Inaugurado en 1881, es el centro de las artes más importante de la Sierra.</p>
                    </div>
                    <!-- Item 2 -->
                    <div class="reveal" style="transition-delay: 0.1s;">
                        <div class="historic-img-container mb-6 shadow-xl">
                            <img src="https://i.pinimg.com/originals/71/96/0b/71960b72598ad9dfde98ee9d3ee1d786.jpg" alt="Catedral Asuncion">
                        </div>
                        <h3 class="serif-title text-xl mb-3">Catedral</h3>
                        <p class="text-stone-500 text-sm font-light">Majestuosa edificación de cantera rosa con un altar que deslumbra al peregrino.</p>
                    </div>
                    <!-- Item 3 -->
                    <div class="reveal" style="transition-delay: 0.2s;">
                        <div class="historic-img-container mb-6 shadow-xl">
                            <img src="https://escapadas.mexicodesconocido.com.mx/wp-content/uploads/2023/08/@turisteandomexi_1920.jpg" alt="El carmen">
                        </div>
                        <h3 class="serif-title text-xl mb-3">Iglesia del Carmen</h3>
                        <p class="text-stone-500 text-sm font-light">Conoce una de las joyas arquitectónicas del siglo XVIII.</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- FOOTER -->
    <footer class="bg-stone-50 border-t border-stone-200 py-24 text-center px-6">
        <div class="serif-title text-2xl md:text-4xl mb-4 tracking-tighter">TEZIUTLÁN</div>
        <p class="text-stone-400 text-sm md:text-lg font-light mb-12 italic max-w-lg mx-auto">
            Un tributo digital a la elegancia serrana y al legado de quienes tallaron nuestra historia en piedra.
        </p>
        <div class="flex justify-center gap-8 mb-12 text-stone-400 text-[10px] font-bold uppercase tracking-widest">
            <a href="#" class="hover:text-amber-700 transition">Instagram</a>
            <a href="#" class="hover:text-amber-700 transition">Archivo</a>
            <a href="#" class="hover:text-amber-700 transition">Contacto</a>
        </div>
        <div class="text-[9px] uppercase tracking-[0.6em] text-black-300">
            © CDLXXIII Portal Oficial de Teziutlán: La Perla de la Sierra
        </div>
    </footer>

    <!-- CHAT IA (INTERACCIÓN) -->
    <!--
        Nota rápida: Este chat cliente envía las preguntas a la ruta POST /api/teziutlan-chat.
        Debes implementar un endpoint en el servidor (o una función serverless) que reciba { messages }
        y reenvíe la conversación a tu proveedor de IA (OpenAI, etc.) usando un "system" prompt que limite
        las respuestas exclusivamente a temas sobre Teziutlán, arte y cultura. Si no usas servidor, puedes
        reemplazar la URL por tu proxy que incluya la API key.

        Ejemplo de system prompt (para usar en el servidor):
        "Eres un asistente experto en Teziutlán, su historia, arte y cultura. Responde de forma precisa y
        concisa. Si la pregunta está fuera de este alcance, rechaza educadamente y proporciona sugerencias
        sobre temas relacionados con Teziutlán/arte/cultura. Cuando sea posible, cita la fuente o indica
        dónde se puede verificar la información. Nunca inventes eventos o citas; si no sabes, di que no
        tienes información y sugiere recursos locales (museos, archivos, bibliotecas)."
    -->

    <button id="chatToggle" class="chat-toggle-btn" aria-expanded="false" aria-controls="chatPanel">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M21 15a2 2 0 0 1-2 2H8l-5 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v10z" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"></path></svg>
        Chat IA
    </button>

    <div id="chatPanel" class="chat-panel" role="region" aria-label="Chat con IA sobre Teziutlán" style="display:none;">
        <div class="chat-header">
            <div>
                <div class="serif-title">Asistente: Teziutlán</div>
                <div style="font-size:12px; opacity:0.9;">Responde solo sobre Teziutlán, arte y cultura</div>
            </div>
            <div style="display:flex; gap:8px; align-items:center;">
                <button id="chatClear" title="Limpiar chat" style="background:transparent; border:none; color:rgba(255,255,255,0.9); cursor:pointer">Limpiar</button>
                <button id="chatClose" title="Cerrar" style="background:transparent; border:none; color:rgba(255,255,255,0.9); cursor:pointer">Cerrar</button>
            </div>
        </div>
        <div class="chat-notice">Este chat ofrece información precisa sobre Teziutlán, arte y cultura. No responde consultas fuera de ese alcance.</div>
        <div id="chatMessages" class="chat-messages" aria-live="polite"></div>
        <div class="chat-footer">
            <input id="chatInput" class="chat-input" placeholder="Pregunta sobre Teziutlán, su arte o su cultura..." aria-label="Escribe tu pregunta sobre Teziutlán" />
            <button id="chatSend" class="chat-send">Enviar</button>
        </div>
    </div>

    <!-- LÓGICA DE INTERACCIÓN -->
    <script>
        // CONTROL DE CARGA Y ENTRADA
        window.addEventListener('load', () => {
            const loader = document.getElementById('loader');
            const heroBg = document.getElementById('hero-bg');
            
            setTimeout(() => {
                document.body.classList.add('loaded');
                heroBg.classList.remove('scale-110'); // Inicia zoom out del hero
                
                // Activar animaciones del Hero secuencialmente
                document.querySelectorAll('.hero-frame .reveal').forEach((el, i) => {
                    setTimeout(() => el.classList.add('animate-in'), 400 + (i * 150));
                });
            }, 800);

            // Eliminar loader del DOM para optimizar
            loader.addEventListener('transitionend', (e) => {
                if(e.propertyName === 'transform') {
                    loader.style.display = 'none';
                }
            });
        });

        // PARALLAX EFECTO EN TEXTO DE FONDO
        window.addEventListener('scroll', () => {
            const pText = document.getElementById('pText');
            let scroll = window.pageYOffset;
            if (pText) {
                pText.style.transform = `translateX(${scroll * 0.12}px)`;
            }
        });

        // OBSERVADOR DE REVELACIÓN (SCROLL REVEAL)
        const revealObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('animate-in');
                }
            });
        }, { 
            threshold: 0.15,
            rootMargin: '0px 0px -50px 0px' 
        });

        document.querySelectorAll('.reveal').forEach(el => revealObserver.observe(el));

        // NAVEGACIÓN SUAVE (SMOOTH SCROLL)
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });

        /* ================= CHAT IA CLIENT ================= */
        const chatToggle = document.getElementById('chatToggle');
        const chatPanel = document.getElementById('chatPanel');
        const chatClose = document.getElementById('chatClose');
        const chatClear = document.getElementById('chatClear');
        const chatMessages = document.getElementById('chatMessages');
        const chatInput = document.getElementById('chatInput');
        const chatSend = document.getElementById('chatSend');

        // Palabras clave simples para ayudar a filtrar consultas fuera de alcance.
        const allowedKeywords = [
            'teziutl', 'teziutlán', 'teziutlan', 'arte', 'cultura', 'historia', 'arquitect', 'teatro', 'catedral',
            'iglesia', 'tradición', 'musica', 'música', 'patrimonio', 'cantera', 'niebla', 'bosque', 'victoria', 'pinal', 'estación'
        ];

        function inScope(text){
            const t = text.toLowerCase();
            return allowedKeywords.some(k => t.includes(k));
        }

        function appendMessage(role, text){
            const msg = document.createElement('div');
            msg.className = 'msg ' + (role === 'user' ? 'user' : 'assistant');
            const bubble = document.createElement('div');
            bubble.className = 'bubble ' + (role === 'user' ? 'user' : 'assistant');
            bubble.textContent = text;
            msg.appendChild(bubble);
            chatMessages.appendChild(msg);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        chatToggle.addEventListener('click', () => {
            const open = chatPanel.style.display !== 'none';
            chatPanel.style.display = open ? 'none' : 'flex';
            chatToggle.setAttribute('aria-expanded', String(!open));
            if(!open) chatInput.focus();
        });

        chatClose.addEventListener('click', () => {
            chatPanel.style.display = 'none';
            chatToggle.setAttribute('aria-expanded', 'false');
        });

        chatClear.addEventListener('click', () => {
            chatMessages.innerHTML = '';
            appendMessage('assistant', 'Hola — soy el asistente experto en Teziutlán. Pregunta sobre historia, arte o cultura.');
            chatInput.focus();
        });

        // Mensaje de bienvenida inicial
        appendMessage('assistant', 'Hola — soy el asistente experto en Teziutlán. Pregunta sobre historia, arte o cultura.');

        async function sendQuestion(){
            const text = chatInput.value.trim();
            if(!text) return;

            // comprobación rápida de alcance
            if(!inScope(text)){
                appendMessage('user', text);
                appendMessage('assistant', 'Lo siento — este chat sólo responde preguntas relacionadas con Teziutlán, su arte y su cultura. Prueba con términos como "historia de la catedral", "Teatro Victoria" o "tradiciones de Teziutlán".');
                chatInput.value = '';
                return;
            }

            appendMessage('user', text);
            chatInput.value = '';

            // Mostrar indicador de carga
            const loadingMsg = document.createElement('div');
            loadingMsg.className = 'msg assistant';
            loadingMsg.innerHTML = '<div class="bubble assistant"><span class="chat-loading" aria-hidden="true"></span> Consultando...</div>';
            chatMessages.appendChild(loadingMsg);
            chatMessages.scrollTop = chatMessages.scrollHeight;

            try{
                const payload = {
                    messages: [
                        { role: 'system', content: 'Eres un asistente experto en Teziutlán, su historia, arte y cultura. Responde de forma precisa y concisa. Si la pregunta está fuera de este alcance, rechaza educadamente y sugiere temas relacionados.' },
                        { role: 'user', content: text }
                    ]
                };

                const res = await fetch('/api/teziutlan-chat', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                // El servidor debe devolver { reply: 'texto' } o similar.
                if(!res.ok) throw new Error('Error en servidor: ' + res.status);
                const data = await res.json();
                const reply = data.reply || data.choices?.[0]?.message?.content || 'Lo siento, no obtuve respuesta.';

                // eliminar indicador de carga
                loadingMsg.remove();
                appendMessage('assistant', reply);

            }catch(err){
                loadingMsg.remove();
                appendMessage('assistant', 'Error al conectar con el servicio de IA. Revisa la configuración del endpoint /api/teziutlan-chat en el servidor.');
                console.error(err);
            }
        }

        chatSend.addEventListener('click', sendQuestion);
        chatInput.addEventListener('keydown', (e)=>{ if(e.key === 'Enter') sendQuestion(); });
    </script>
</body>
</html>
